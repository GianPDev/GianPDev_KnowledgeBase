---
tags: [bash, linux, server, shell, fish, visudo]
---
[[bash utilities]]
[[fish shell]]

### Change default shell to fish
```bash
chsh -s /usr/bin/fish
```
It will then prompt you to enter your password

### Change default shell back to bash
```bash
chsh -s /bin/bash
```

### Change default visudo editor
```bash
sudo update-alternatives --config editor
```

### set ownership of folder to current user
```bash
chown -R $(whoami) ~/FOLDER
```

### for loop (foreach doesn't work in almalinux?)
All these assume that there is a txt file called `serverips.txt` with IPs separated by new lines (`enter`, `\n` etc)
```bash
for ip in $(cat serverips.txt); do ssh-copy-id root@$ip; done
```
```bash
for ip in $(cat serverips.txt); do ssh root@$ip passwd USER; done
```
A way to see if all servers are connected (after copying ssh keys)
```bash
for ip in $(cat serverips.txt); do ssh root@$ip "hostnamectl"; echo ""; done
```

Make user sudo without password (has issues with passwords that have special characters)
```bash
for ip in $(cat serverips.txt); do ssh admin@$ip 'hostnamectl; echo ""; sudo echo "admin ALL=(ALL) NOPASSWD:ALL" | sudo -S tee -a /etc/sudoers.d/ansible_admin'; done
```

### Yabs Error:  "`Warning: Both IPv4 AND IPv6 connectivity were not detected. Check for DNS issues...`" Or if curl is not working on anything

Check `/etc/resolve.conf`
```bash
vi /etc/resolve.conf
```
Should look like this:
```bash
# Generated by NetworkManager
nameserver 8.8.8.8
nameserver 8.8.4.4
```

### Change Hostname
```bash
hostnamectl set-hostname NAME
```